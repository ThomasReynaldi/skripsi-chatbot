<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>PUSDIKLAT - Beranda</title>
    <link rel="icon" href="{{ url_for('static', filename='img/logoweb.ico') }}" type="image/x-icon">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script> -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>

    <style>
        .carousel-item img {
        width: 800px;
        height: 400px;
        object-fit: cover;
        }
    </style>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/chat.css')}}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
       
</head>


<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-light bg-secondary">
        <a class="navbar-brand" href="/">PUSDIKLAT</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
            aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item">
                    <a class="nav-link" href="#">Beranda</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Profil</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Tentang</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Kontak</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link btn btn-success" href="login">Login</a>
                </li>
                <!-- Add more navbar links as needed -->
            </ul>
        </div>
    </nav>
    <!-- Content -->

    <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
        <ol class="carousel-indicators">
            <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
            <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
            <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
        </ol>
        <div class="carousel-inner">
            <div class="carousel-item active">
                <img src="{{ url_for('static', filename='img/billboard-1.jpg')}}" class="d-block w-100" alt="Slide 1">
            </div>
            <div class="carousel-item">
                <img src="{{ url_for('static', filename='img/billboard-4.png')}}" class="d-block w-100" alt="Slide 2">
            </div>
            <div class="carousel-item">
                <img src="{{ url_for('static', filename='img/billboard-8.png')}}" class="d-block w-100" alt="Slide 3">
            </div>
        </div>
        <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
        </a>
    </div>

    <div class="container">
        <h1 class="mt-4">Selamat Datang di Pusat Informasi PUSDIKLAT</h1>
        <!-- Add your content here -->
    </div>
    <div class="container">
        <h1>Berita</h1>
        <div class="row">
            <div class="col-md-6">
                <div class="card mb-3">
                    <img src="{{ url_for('static', filename='img/logosetjen.png') }}" class="card-img-top" alt="Berita 1">
                    <div class="card-body">
                        <h5 class="card-title">Judul Berita 1</h5>
                        <p class="card-text">Lorem ipsum, dolor sit amet consectetur adipisicing elit. Deleniti natus aliquid similique odit voluptate! Autem consequatur velit architecto similique adipisci sint iste deserunt reiciendis saepe ipsum? Nemo quo porro aliquam?</p>
                        <a href="#" class="btn btn-primary">Baca Selengkapnya</a>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card mb-3">
                    <img src="{{ url_for('static', filename='img/logosetjen.png') }}" class="card-img-top" alt="Berita 2">
                    <div class="card-body">
                        <h5 class="card-title">Judul Berita 2</h5>
                        <p class="card-text">Deskripsi singkat berita 2...</p>
                        <a href="#" class="btn btn-primary">Lorem ipsum dolor sit, amet consectetur adipisicing elit. Iusto quas, quasi pariatur eaque, nisi ipsam eveniet ut amet reprehenderit accusantium incidunt similique suscipit repellendus inventore praesentium culpa sit, ad tempore?</a>
                    </div>
                </div>
            </div>
            <!-- Tambahkan kolom card berita lainnya sesuai kebutuhan -->
        </div>
    </div>
    <!-- chatbot start -->
    <div class="chat-bar-collapsible">
        <!-- Chat button -->
        <button id="chat-button" type="button" class="collapsible">Chat with us!
            <i id="chat-icon" style="color: #fff;" class="fa fa-fw fa-comments-o"></i>
        </button>
    
        <!-- Chat content -->
        <div class="content">
            <div class="full-chat-block">
                <!-- Message container -->
                <div class="outer-container">
                    <div class="chat-container">
                        <!-- Messages -->
                        <div id="chatbox">
                            <h5 id="chat-timestamp"></h5>
                            <p id="botStarterMessage" class="botText"><span>Halo saya PUSDIKBOT,ada yang bisa dibantu ?</span></p>
                        </div>
    
                        <!-- User input box -->
                        <div class="chat-bar-input-block">
                            <div id="userInput">
                                <input id="textInput" class="input-box" type="text" name="msg" placeholder="Tap 'Enter' to send a message">
                                <p></p>
                            </div>
    
                            <div class="chat-bar-icons">
                                <i id="chat-icon" style="color: crimson;" class="fa fa-fw fa-heart" onclick="heartButton()"></i>
                                <i id="chat-icon" style="color: #333;" class="fa fa-fw fa-send" onclick="sendButton()"></i>
                            </div>
                        </div>
    
                        <div id="chat-bar-bottom">
                            <p></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- end Of ChatBot -->

    <!-- Footer -->
    <footer class="footer bg-dark text-light">
        <div class="container">
            <div class="row">
                <div class="col-md-4">
                    <h5>Alamat</h5>
                    <p>Jl. Contoh Alamat No. 123, Kota Anda</p>
                </div>
                <div class="col-md-4">
                    <h5>Kontak</h5>
                    <p>Email: info@websiteanda.com<br>Telepon: (123) 456-7890</p>
                </div>
                <div class="col-md-4">
                    <h5>Tautan</h5>
                    <ul class="list-unstyled">
                        <li><a href="#">Beranda</a></li>
                        <li><a href="#">Profil</a></li>
                        <li><a href="#">Berita</a></li>
                        <li><a href="#">Kontak</a></li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="bottom-footer bg-dark">
            <div class="container">
                <div class="row">
                    <div class="col-md-12 text-center">
                        <p>&copy; 2023 Nama Website Anda. All rights reserved.</p>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    

    <!-- Bootstrap core JavaScript -->      
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- <script src="{{ url_for('static', filename='js/chat.js')}}"></script> -->
    <script>
        // Mendapatkan waktu
        function getTime() {
            let today = new Date();
            hours = today.getHours();
            minutes = today.getMinutes();

            if (hours < 10) {
                hours = "0" + hours;
            }

            if (minutes < 10) {
                minutes = "0" + minutes;
            }

            let time = hours + ":" + minutes;
            return time;
        }
 

        // Menambahkan pesan ke chatbox
        function addChatMessage(sender, message, time) {
    let chatbox = document.getElementById("chatbox");

    let messageElement = document.createElement("div");
    messageElement.className = "message";
    

    let messageContent = document.createElement("p");
    messageContent.className = sender + "Text";

    let messageBubble = document.createElement("span");
    messageBubble.className = "message-bubble";
    messageBubble.innerText = message;

    messageContent.appendChild(messageBubble);

    let timestampElement = document.createElement("span");
    timestampElement.className = "time-right";
    timestampElement.innerText = time;

    messageElement.appendChild(messageContent);
    messageElement.appendChild(timestampElement);

    chatbox.appendChild(messageElement);

    chatbox.scrollTop = chatbox.scrollHeight;
    if (sender === "bot") {
        playNotificationSound();
    }
}

        // Mengirim pesan dari pengguna
        function sendMessage() {
            let userInput = document.getElementById("textInput");
            let userMessage = userInput.value.trim();

            if (userMessage !== "") {
                // Menambahkan pesan pengguna ke chatbox
                let time = getTime();
                addChatMessage("user", userMessage, time);

                // Mengirim permintaan AJAX untuk mendapatkan respons chatbot
                $.ajax({
                    url: "/get_response",
                    type: "POST",
                    data: { user_input: userMessage },
                    success: function (response) {
                        let botMessage = response.message;

                        // Menambahkan pesan chatbot ke chatbox
                        let time = getTime();
                        addChatMessage("bot", botMessage, time);
                    
                        // Menampilkan pesan "Ada pertanyaan lain?"
                        setTimeout(function() {
                        let botQuestion = "Ada pertanyaan lain?";
                        addChatMessage("bot", botQuestion, getTime());
                         }, 10000);
                        }
                });

                // Mengosongkan input pengguna
                userInput.value = "";
            }
        }

        // Mengaktifkan pengiriman pesan ketika tombol Enter ditekan
        document.getElementById("textInput").addEventListener("keyup", function (event) {
            if (event.key === "Enter") {
                sendMessage();
            }
        });

        // Mengaktifkan pengiriman pesan ketika tombol Send diklik
        document.getElementById("chat-icon").addEventListener("click", function () {
            sendMessage();
        });
        var coll = document.getElementsByClassName("collapsible");

for (let i = 0; i < coll.length; i++) {
    coll[i].addEventListener("click", function () {
        this.classList.toggle("active");

        var content = this.nextElementSibling;

        if (content.style.maxHeight) {
            content.style.maxHeight = null;
        } else {
            content.style.maxHeight = content.scrollHeight + "px";
        }

    });
}
    </script>
</body>

</html>
